<Application x:Class="DbDesigner.App.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
             xmlns:local="clr-namespace:DbDesigner.App"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Theme/LightTheme.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />

            <Style TargetType="Window">
                <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="FontFamily" Value="Segoe UI" />
                <Setter Property="Icon" Value="{DynamicResource AppIcon}" />
            </Style>

            <Style TargetType="Button">
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="Background" Value="{DynamicResource PrimaryBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource PrimaryBrush}" />
                <Setter Property="Padding" Value="16,10" />
                <Setter Property="Margin" Value="0" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="MinHeight" Value="38" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="6">
                                <ContentPresenter HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  RecognizesAccessKey="True" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource PrimaryBrushLight}" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.5" />
                                    <Setter Property="Cursor" Value="Arrow" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="TextBox">
                <Setter Property="Padding" Value="8" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            </Style>

            <Style TargetType="PasswordBox">
                <Setter Property="Padding" Value="8" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            </Style>

            <Style TargetType="ListBox">
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
            </Style>

            <Style TargetType="ListBoxItem">
                <Setter Property="Padding" Value="10,6" />
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="0,0,0,1" />
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    SnapsToDevicePixels="True">
                                <ContentPresenter Margin="{TemplateBinding Padding}"
                                                  HorizontalAlignment="Stretch" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="{DynamicResource PrimaryBrush}" />
                                    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource PrimaryBrushLight}" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.6" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="ListView">
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="1" />
            </Style>

            <Style TargetType="ListViewItem">
                <Setter Property="Padding" Value="10,6" />
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="0,0,0,1" />
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListViewItem">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    SnapsToDevicePixels="True">
                                <ContentPresenter Margin="{TemplateBinding Padding}"
                                                  HorizontalAlignment="Stretch" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="{DynamicResource PrimaryBrush}" />
                                    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource PrimaryBrushLight}" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.6" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="avalonEdit:TextEditor">
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="FontFamily" Value="Consolas" />
            </Style>

            <Style TargetType="DataGrid">
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="RowBackground" Value="{DynamicResource CardBrush}" />
                <Setter Property="AlternatingRowBackground" Value="{DynamicResource SurfaceBrush}" />
                <Setter Property="HorizontalGridLinesBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="VerticalGridLinesBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="RowStyle">
                    <Setter.Value>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                            <Setter Property="BorderThickness" Value="0,0,0,1" />
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource PrimaryBrush}" />
                                    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryBrushLight}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="ColumnHeaderStyle">
                    <Setter.Value>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                            <Setter Property="BorderThickness" Value="0,0,0,1" />
                        </Style>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="TabControl">
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="ItemContainerStyle" Value="{DynamicResource MainTabItemStyle}" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabControl">
                            <Grid SnapsToDevicePixels="True">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <Border Grid.Row="0"
                                        Background="{DynamicResource SurfaceBrush}">
                                    <UniformGrid IsItemsHost="True"
                                                 Rows="1"
                                                 HorizontalAlignment="Stretch" />
                                </Border>

                                <Border Grid.Row="1"
                                        Background="{TemplateBinding Background}">
                                    <ContentPresenter ContentSource="SelectedContent"
                                                      Margin="{TemplateBinding Padding}"
                                                      Focusable="False" />
                                </Border>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="MainTabItemStyle" TargetType="TabItem">
                <Setter Property="Padding" Value="20,14" />
                <Setter Property="FontSize" Value="14" />
                <Setter Property="Margin" Value="2,0" />
                <Setter Property="MinHeight" Value="48" />
                <Setter Property="MinWidth" Value="120" />
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
                <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="HeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Tag}"
                                           FontSize="16"
                                           Margin="0,0,10,0" />
                                <TextBlock Text="{Binding}" />
                            </StackPanel>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabItem">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="10"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter ContentSource="Header"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource PrimaryBrushLight}" />
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="{DynamicResource CardBrush}" />
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}" />
                                    <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}" />
                                    <Setter TargetName="Bd" Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect BlurRadius="8" ShadowDepth="0" Opacity="0.2" />
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="TabItem" BasedOn="{StaticResource MainTabItemStyle}" />

            <Style TargetType="GroupBox">
                <Setter Property="Margin" Value="0,8,0,0" />
                <Setter Property="Padding" Value="8" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
            </Style>

            <Style x:Key="CardStyle" TargetType="Border">
                <Setter Property="CornerRadius" Value="8" />
                <Setter Property="Background" Value="{DynamicResource CardBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource BorderBrushLight}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="12" />
                <Setter Property="Margin" Value="0,8,0,0" />
            </Style>
        </ResourceDictionary>
    </Application.Resources>
</Application>
